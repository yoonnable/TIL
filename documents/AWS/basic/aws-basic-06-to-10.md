# EC2
* Elastic Compute Cloud
* 안전하고 크기 조정이 가능한 컴퓨팅 파워를 클라우드에서 제공하는 웹 서비스
    * 클라우드 = 빌려쓰기
    * => EC2 = 컴퓨팅을 빌려쓰는 서비스


# EC2의 가격 모델
## 저렴한 가격 순
### Spot Instance
* 경매 형식으로 시장에 남는 인스턴스를 저렴하게 구매해서 쓰는 방식
* 최대 90% 정도 저렴
* 단 언제 도로 내주어야 할지 모름
시작 종료가 자유롭거나 추가적인 컴퓨팅 파워가 필요한 경우

### 예약 인스턴스(Reserved Instance-RI)
* 미리 일정 기간(1년 - 3년) 약정해서 쓰는 방식
* 최대 75%정도 저렴
* 수요 에측이 확실할 때
* 총 비용을 절감하기 위해 어느정도 기간의 약정이 가능한 사용자

### On-Demand
* 실행하는 인스턴스에 따라 시간 또는 초당 컴퓨팅 파워로 측정된 가격을 지불
* 약정은 필요 없음
* 장기적인 수요 예측이 힘들거나 유연하게 EC2를 사용학 싶을 때
* 한 번 써보고 싶을 때

### 전용 호스트(Dedicated)
* 실제 물리적인 서버를 암대하는 방식
* 라이선스 이슈(Windows Server 등)
* 규정에 따라 필요한 경우
* 퍼포먼스 이슈 (CPU Steal 등)

## * EC2의 가격모델은 EBS와는 별도 (EBS는 사용한 만큼 지불)
## * 기타 데이터 통신 등의 비용은 별도로 청구 (AWS 바깥으로 나가는 트래픽에 대해서만 요금 부과)


# EC2의 유형과 크기
* 인스턴스 유형 = 일종의 직업
* 인스턴스 사이즈 = 일종의 레벨
* 타입별로 이름 부여 ex) t타입, m타입, inf타입 등
* 타입 세대별로 숫자 부여 ex) m5 = m인스턴스의 5번째 세대
* 아키텍쳐 및 사용 기술에 따라 접두사 ex) t4g = t4 인스턴스 중 AWS Graviton 프로세서를 사용(g)
* t2 micro : 프리 티어 사용 가능


# EC2 - EBS, Snapshot, AMI
## EBS
* Elastic Block Store : AWS 클라우드의 EC2 인스턴스에 사용할 *영구 블록 스토리지* 볼륨을 제공
* 가상 하드드라이브
* EC2 인스턴스가 종료되어도 계속 유지 가능 (서로 분리되어 네트워크로 연결되어 있음)
* 하나의 EBS를 여러 EC2 장착 가능( EBS Multi Attach)
* 루트 볼륨으로 사용시 EC2가 종료되면 같이 삭제됨
    * 단 설정을 통해 EBS만 따로 존속 가능
* EC2와 *같은 가용영역*에 존재
* 총 5가지 타입을 제공
    * 범용 (General Purpose or GP3) : SSD
    * 프로비저닝 된 IOPS (Provisioned IOPS or io2) : SSD
    * 쓰루풋 최적화 (Throughput Optimized HDD or st1)
    * 콜드 HDD (SC1)
    * 마그네틱 (Standard)


## Snapshot
* 특정 시간에 EBS 상태의 저장본 : EBS에 사진을 찍어둔 개념
* 필요시 스냅샷을 통해 특정 시간의 EBS를 복구 가능
* S3에 보관 : 증분식 저장

## AMI
* EC2 인스턴스를 실행하기 위해 필요한 정보를 모은 단위
    * OS, 아키텍쳐 타입, 저장공간 용량 등
* AMI를 사용하여 EC2를 복제하거나 다른 리전 -> 계정으로 전달 가능
* 스냅샷을 기반으로 AMI 구성 가능

## EC2 인스턴스 만들기
### 1. 이름 및 태그 추가
### 2. AMI 선택
### 3. 인스턴스 유형 선택
### 4. 키 페어 입력 (최초에는 새로 만들어야 함)
### 5. 보안 그룹 생성
* 일단 HTTP 추가
### 6. 스토리지 추가 
* 마그네틱이 제일 저렴함
* 종료 시 삭제 : 인스턴스 삭제 시 자동으로 EBS 삭제 여부
### 7. 인스턴스 시작

## 연결 후 웹서버 실행
* 명령어
```
sudo -s // 계정 변경

yum install httpd -y // 웹 서버 설치

service httpd start // 웹 서버 시작
```

## EC2 인스턴스 AMI 이용해서 복사하기
### 1. 복사 대상 EC2 인스턴스 우클릭 > 