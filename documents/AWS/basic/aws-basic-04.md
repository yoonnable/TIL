# AWS 계정 - 생성하기
계정을 새로 생성하면 자동으로 루트 유저, 기본 리소스가 생성된다.
## 계정 종류
### 1. 루트 유저
- 최상위 권한
- 가입할 때 사용한 이메일로 로그인
- 탈취 당하면 복구 어려움 -> 사용을 자제하고 MFA(일회용 패스워드)설정 필요
- 관리용으로만 사용하기
- AWS API 호출 불가능( Accesskey / Secret Accesskey 부여 불가)
- AWS 여러 기능 사용불가

### 2. IAM 유저
- 가입할 때 주어진 별칭, 사용자 이름으로 로그인
- 기본으로 주어진 권한이 없어서 부여가 필요함 ex) 관리자 IAM user, 개발자 IAM user, 디자이너 IAM user, 등 역할에 따라서
- 사람이 아닌 애플리케이션 등 가상의 주체를 대표할 수도 있음
- AWS API 호출 가능
    - Accesskey: 아이디 개념
    - Secret Accesskey: 비밀번호 개념 (공개하거나 까먹으면 안 됨)
- AWS의 관리를 제외한 모든 작업은 관리용 IAM user를 생성해 사용!!
- 빌링 관련 권한은 루트 유저가 허용해야 함

## AWS 계정 만들고 설정하기 순서
* aws 홈페이지 우측 상단에 언어를 한국어로 바꾸고 시작.
### 1. AWS 계정 만들기 : 루트 유저 (aka 회원가입)
### 2. 루트 유저로 로그인 하기
* 리전을 서울로 설정하기
### 3. 루트 유저 MFA 설정하기(일회용 패스워드) 
* 참고로 AWS는 UI나 뭐 이런게 휙휙 빠르게 변해서 내가 공부한 기준은 2024.09이고, 3년 전 올려주신 강좌 영상을 보고 실습함.
* 사전 준비: 본인 핸드폰에 구글 OTP 앱 설치하기
1. Console Home 화면 우측 상단에 [본인 계정명] 클릭 > `보안 자격 증명` 클릭
2. 내 보안 자격 증명 화면에서 `MFA 할당` 클릭
3. MFA 디바이스 선택 화면에서,
4. MFA device name 입력
5. MFA device 옵션 `인증 관리자 앱` 선택 > `다음` 클릭
    * 핸드폰을 사용하는 방법이다.
6. 다음 화면의 설명대로 따른다.
* QR 코드는 마우스 우클릭 > 다른이름으로 저장하기 를 통해 안전한 곳에 복사해두자!
* QR 코드 스캔은 앞서 다운받은 구글 OTP 앱을 사용하면 된다.
7. MFA 추가 클릭
8. MFA 할당 완료
### 4. 계정 별칭 생성하기
1. 좌측 `대시보드` 클릭
2. IAM 대시보드 화면으로 이동
3. 우측 AWS 계정 섹션에 계정 별칭 `생성` 클릭
4. 별칭 생성
> 대시보드 화면에서 보안 권장 사항에 알림 표시가 있고, 루트 사용자 MFA 할당이라고 나와있을 경우 당황하지 말고  ![alt text](image-1.png) 이 새로고침 버튼 클릭하면 이 전에 MFA 활성화 한게 적용된다.
### 5. 관리 권한(Admin Access)가진 IAM 유저 생성하기
1. 좌측 `사용자` 클릭
2. `사용자 생성` 클릭
3. 사용자 이름 입력 (관리 권한이니까 admin으로 함)
4. 관리 권한이니까 `AWS Management Console에 대한 사용자 액세스 권한 제공` 선택
5. 그 밑에 `IAM 사용자를 생성하고 싶음` 선택
6. 공부용으로 내가 쓸거니까 `사용자 지정 암호` 선택 후 암호 입력
7. 공부용이니까 `사용자는 다음 로그인 시 새 암호를 생성해야 합니다` 선택 해제
8. `다음` 클릭
8. 권한 설정 화면에서 `직접 정책 연결` 선택
9. `AdministratorAccess` 선택 : 빌링을 제외한 AWS의 모든 권한을 부여하는 것.
10. `다음` 클릭
11. `사용자 생성` 클릭
12. 관리권한 IAM 유저 계정 생성 완료 `.csv 파일 다운로드` 클릭해서 다운받아놓기
### 6. IAM 유저 MFA 활성화
1. 사용자 이름(`admin`) 클릭
2. `보안 자격 증명` 탭 클릭
3. 멀티 팩터 인증(MFA)에서 `MFA 디바이스 할당` 클릭
4. 이후 [3번](#3-루트-유저-mfa-설정하기일회용-패스워드)과 동일하게 진행
* IAM 유저의 QR 코드는 따로 저장할 필요가 없다. why? 탈취되면 IAM 유저 삭제하고 다시 만들면 되니까
---
여기까지 루트 유저로 할 일은 모두 끝났다.
이제부터는 IAM 유저로 로그인 해서 서비스를 사용 할 것!
### 7. 루트 유저 로그아웃 후 IAM 유저로 로그인
1. [여기](#4-계정-별칭-생성하기)서 생성한 별칭, [IAM 유저 생성할 때](#5-관리-권한admin-access가진-iam-유저-생성하기) 생성한 사용자 이름과 사용자 지정 암호를 입력 
2. OTP 앱에서 IAM 유저의 MFA를 확인해서 입력하기
3. 콘솔 홈 화면이 뜨면 로그인 성공!
### Reference
-  https://www.youtube.com/playlist?list=PLfth0bK2MgIan-SzGpHIbfnCnjj583K2m